(function(){"use strict";var e={4204:function(e,t,n){var a=n(9242),l=n(3396),i=n(7139);const o={id:"app"},s={class:"wrap"},r={key:0},u=(0,l._)("h2",null,"Select a month to schedule",-1),d={key:1},h=(0,l._)("button",{type:"submit"},"Submit Availability",-1),c={key:2},m=(0,l._)("h2",null,"Schedule",-1),p=["href"],f={class:"availabilities"},v={key:0},b=["onClick"];function D(e,t,n,D,g,y){const w=(0,l.up)("Calendar");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",s,[g.monthSelected?((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(w,{modelValue:g.selectedDates,"onUpdate:modelValue":t[1]||(t[1]=e=>g.selectedDates=e),minDate:y.firstDayOfMonth,maxDate:y.lastDayOfMonth,selectionMode:"multiple",inline:""},null,8,["modelValue","minDate","maxDate"]),(0,l._)("form",{onSubmit:t[5]||(t[5]=(0,a.iM)(((...e)=>y.handleSubmit&&y.handleSubmit(...e)),["prevent"]))},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>g.name=e),placeholder:"Name",required:""},null,512),[[a.nr,g.name]]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>g.quota=e),placeholder:"Quota",required:"",onBlur:t[4]||(t[4]=(...e)=>y.validateQuota&&y.validateQuota(...e))},null,544),[[a.nr,g.quota,void 0,{number:!0}]]),h],32),(0,l._)("button",{onClick:t[6]||(t[6]=(...e)=>y.submitAll&&y.submitAll(...e))},"Get Schedule")])):((0,l.wg)(),(0,l.iD)("div",r,[u,(0,l.Wm)(w,{modelValue:g.selectedMonth,"onUpdate:modelValue":[t[0]||(t[0]=e=>g.selectedMonth=e),y.handleMonthSelect],view:"month",dateFormat:"mm/yy"},null,8,["modelValue","onUpdate:modelValue"])])),g.responseData?((0,l.wg)(),(0,l.iD)("div",c,[m,(0,l.Uk)(" "+(0,i.zw)(g.responseData)+" ",1),(0,l._)("p",null,[(0,l.Uk)("Donations can be made via PayPal to "),(0,l._)("a",{href:"https://paypal.me/jwricci",target:"_blank"},"https://paypal.me/jwricci",8,p)])])):(0,l.kq)("",!0),(0,l._)("div",f,[g.availabilities.length?((0,l.wg)(),(0,l.iD)("h2",v,"Employee Availabilities")):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.availabilities,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l._)("h3",null,(0,i.zw)(e.name),1),(0,l._)("p",null,"Quota: "+(0,i.zw)(e.quota),1),(0,l._)("p",null,"Dates: "+(0,i.zw)(e.dates.sort(((e,t)=>e-t)).map((e=>e.getDate())).join(", ")),1),(0,l._)("button",{onClick:e=>y.editSchedule(t)},"Edit",8,b)])))),128))])])])}n(560);var g=n(2845),y=n(1076),w={components:{Calendar:g["default"]},data(){return{name:"",selectedDates:[],availabilities:[],quota:null,editIndex:null,availability:null,responseData:null,selectedMonth:null,monthSelected:!1}},computed:{firstDayOfMonth(){if(this.selectedMonth){const e=this.selectedMonth.getMonth(),t=this.selectedMonth.getFullYear();return new Date(t,e,1)}return null},lastDayOfMonth(){if(this.selectedMonth){const e=this.selectedMonth.getMonth(),t=this.selectedMonth.getFullYear();return new Date(t,e+1,0)}return null}},methods:{handleMonthSelect(){this.monthSelected=!0,this.selectedDates=this.getAllDatesInMonth()},getAllDatesInMonth(){const e=[],t=this.selectedMonth.getFullYear(),n=this.selectedMonth.getMonth(),a=new Date(t,n+1,0),l=a.getDate();for(let i=1;i<=l;i++)e.push(new Date(t,n,i));return e},validateQuota(){const e=this.lastDayOfMonth.getDate();(this.quota<0||this.quota>e||!Number.isInteger(this.quota))&&(alert(`Quota must be an integer between 0 and ${e}`),this.quota=null)},handleSubmit(){const e=this.getAllDatesInMonth().map((e=>e.getTime())),t=this.selectedDates.map((e=>new Date(e).getTime())),n=e.filter((e=>!t.includes(e))),a={name:this.name,quota:this.quota,dates:n.map((e=>new Date(e)))};null!==this.editIndex?(this.availabilities[this.editIndex]=a,this.editIndex=null):this.availabilities.push(a),this.resetForm()},resetForm(){this.name="",this.quota=null,this.handleMonthSelect()},editSchedule(e){const t=this.availabilities[e];this.editIndex=e,this.name=t.name,this.quota=t.quota;const n=this.getAllDatesInMonth().map((e=>e.getTime())),a=t.dates.map((e=>new Date(e).getTime()));this.selectedDates=n.filter((e=>!a.includes(e))).map((e=>new Date(e)))},async submitAll(){try{const e=this.availabilities.map((e=>{const t=e.dates.map((e=>{const t=new Date(e);return t.getDate()}));return{...e,dates:t}})),t={employeeList:e,numberOfDays:this.lastDayOfMonth.getDate()},n=await y.Z.post("https://pet-poodle-scheduler.koyeb.app/api/process",t);200===n.status?this.responseData=n.data:500===n.status?(console.error("Error: ",n.data),alert("Server error: "+n.data.message)):alert("Something went wrong")}catch(e){console.error("Error: ",e),alert(e.response.data)}}}},M=n(89);const S=(0,M.Z)(w,[["render",D]]);var O=S;(0,a.ri)(O).mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,i){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],l=e[d][1],i=e[d][2];for(var s=!0,r=0;r<a.length;r++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[r])}))?a.splice(r--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,l,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],s=a[1],r=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(r)var d=r(n)}for(t&&t(a);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4204)}));a=n.O(a)})();
//# sourceMappingURL=app.ee1ec9e5.js.map